---
alwaysApply: true
---
每次优化游戏规则，需要将规则加入到rule.mdc
【小游戏UI设计通用规则】
1. 布局框架：
   - 顶部固定beijingtu.jpg（max-width: 1400px，响应式适配）
   - 中间为游戏主区域，最大宽度1400px，居中显示
   - 整体风格：三角洲行动风格，科技感、未来感
   - 适配：PC和移动端自适应（使用@media查询）

2. 色彩系统（科技蓝橙配色方案）：
   - 主色调：
     * 青色：#00ffff（标题、主要文字、按钮边框）
     * 橙色：#ffa500（强调、数值、hover状态）
   - 背景色：
     * 页面背景：深色渐变 linear-gradient(135deg, #0a0e1a, #1a1f35, #0f1420)
     * 容器背景：rgba(20, 25, 45, 0.95) - rgba(15, 20, 35, 0.98)
     * 游戏板背景：rgba(10, 15, 30, 0.8) - rgba(5, 10, 20, 0.9)
   - 功能色：
     * 成功/安全：#00ff88（绿色，用于配对成功、正确状态）
     * 危险/错误：#ff4500（红色，用于炸弹、错误状态）
     * 信息提示：#a0d0e0（淡蓝色，用于说明文字）
   - 边框：
     * 主要边框：2px solid rgba(0, 255, 255, 0.3-0.5)
     * hover边框：#ffa500

3. 光晕效果系统（核心视觉特色）：
   - 标题光晕：
     * text-shadow: 0 0 10px rgba(0, 255, 255, 0.8)
     * filter: drop-shadow(0 0 10px rgba(0, 255, 255, 0.8))
   - 容器光晕：
     * box-shadow: 0 0 60px rgba(0, 255, 255, 0.2), 0 0 100px rgba(255, 165, 0, 0.1)
     * inset 0 0 80px rgba(0, 0, 0, 0.3)（内阴影增加深度）
   - 按钮光晕：
     * 默认：0 0 20px rgba(0, 255, 255, 0.3)
     * hover：0 5px 30px rgba(0, 255, 255, 0.6)
   - 卡片/格子光晕：
     * 默认：0 0 15px rgba(0, 255, 255, 0.4)
     * hover：0 0 25px rgba(0, 255, 255, 0.8)

4. 字体系统：
   - 全局字体：font-family: "Orbitron", "Microsoft YaHei", Arial, sans-serif
   - 标题字体：
     * 主标题：42px，font-weight: 900，渐变色+光晕
     * 副标题：20-24px，font-weight: bold，纯色#00ffff
   - 游戏内容：
     * 统计数值：24px，font-weight: 900，颜色#ffa500
     * 说明文字：14px，颜色#a0d0e0
     * 小提示：12-13px，颜色#888

5. 交互细节：
   - 悬停效果（所有可点击元素）：
     * transform: translateY(-3px)（按钮）或 scale(0.95)（卡片）
     * box-shadow增强（光晕加倍）
     * 边框颜色变化：#00ffff → #ffa500
   - 按钮样式：
     * 圆角：10-15px（大按钮）/ 6-8px（小按钮）
     * padding: 12px 25px（大）/ 10px 20px（小）
     * 渐变背景：linear-gradient(135deg, rgba(0, 255, 255, 0.2), rgba(0, 200, 255, 0.3))
     * 边框：2px solid #00ffff
     * 禁用使用原生按钮样式
   - 网格/卡片元素：
     * 未点击：科技蓝渐变，2px边框，光晕效果
     * 已点击：深色背景，较弱光晕
     * aspect-ratio: 1（保持方形）

6. 动画系统：
   - 标题动画：
     * titleGlow：光晕闪烁（3s循环）
     * 渐变色移动：background-position动画
   - 悬停动画：transition: all 0.3s
   - 出现动画：
     * messageGlow：1s循环（用于提示信息）
     * modalFadeIn：0.3s ease-out（弹窗出现）
   - 限制：避免过度动画，保持性能

7. 响应式设计：
   - PC端（>768px）：
     * 游戏板和侧边栏并排显示（flex布局）
     * 最大宽度1400px
   - 移动端（≤768px）：
     * 垂直布局（flex-direction: column）
     * 字体缩小（标题32px→24px）
     * padding减少（30px→15-20px）
     * 游戏板gap减小

8. 弹窗/模态框设计：
   - 背景：rgba(0, 0, 0, 0.8) + backdrop-filter: blur(5px)
   - 内容区：深色渐变背景，青色边框，大光晕
   - 关闭按钮：右上角，红色，hover旋转90度
   - 动画：scale+opacity淡入（0.3s）

9. 面板/卡片设计：
   - 统计面板：
     * 背景：rgba(0, 60, 80, 0.3) - rgba(0, 40, 60, 0.4)
     * 边框：2px solid rgba(0, 255, 255, 0.5)
     * 内部元素：青色标签+橙色数值
   - 规则面板：
     * 标题：橙色(#ffa500)
     * 内容：淡蓝色(#a0d0e0)
     * 强调文字：红色(#ff4500)

10. 图标/Emoji使用规范：
    - 功能分类图标（推荐使用场景）：
      * 游戏类型标识：
        - 扫雷：💣（炸弹）
        - 翻翻乐：🎴（花牌）、🃏（扑克）
        - 迷宫：🧭（指南针）、🗺️（地图）、🔥（火焰-地狱版）
      * 操作按钮：
        - 开始/重置：🎲（骰子）、🔄（刷新）
        - 返回首页：🏠（房屋）
        - 保存/导出：💾（软盘）、📥（下载）
        - 导入/加载：📂（文件夹）、📤（上传）
      * 统计信息：
        - 时间：⏱️（秒表）、⏰（闹钟）
        - 次数/步数：🔢（数字）、👣（脚印）
        - 分数/金币：💰（钱袋）、💵（钞票）、💎（宝石）
        - 进度：📊（柱状图）、📈（趋势图）
      * 状态提示：
        - 成功/胜利：🎉（彩带）、✅（对勾）、🏆（奖杯）
        - 失败/警告：⚠️（警告）、❌（错号）、🚫（禁止）
        - 帮助/规则：💡（灯泡）、ℹ️（信息）、❓（问号）
      * 游戏元素：
        - 方向控制：↑↓←→（箭头）
        - 配对成功：✨（星星）、⭐（五角星）
        - 炸弹/危险：💣（炸弹）、⚡（闪电）、🔴（红圆）
        - 空格/空白：⭕（空心圆）、⚪（白圆）
    
    - 使用原则：
      * 语义化：图标含义要与功能匹配，避免误导用户
      * 一致性：同类功能使用相同图标（如所有"返回"按钮都用🏠）
      * 适度性：不过度堆砌，每行文字最多1-2个emoji
      * 可读性：emoji后加空格，避免与文字粘连
    
    - 尺寸与样式：
      * 标题中的emoji：font-size: 42-48px，可添加光晕效果
      * 按钮中的emoji：font-size: 16-20px，前置于文字
      * 统计项中的emoji：font-size: 18-24px，作为标签使用
      * 游戏元素emoji：根据格子大小调整（24-32px）
    
    - 备选方案（CSS Icons）：
      * 当emoji显示效果不佳时，使用CSS绘制图标
      * 简单形状：用border-radius + background绘制圆形、方形
      * 复杂图标：使用SVG内联或外部引用
      * 优势：颜色可控、支持渐变、响应式缩放
    
    - 颜色搭配：
      * 成功类emoji：可用filter添加绿色调 filter: hue-rotate(120deg)
      * 危险类emoji：保持原色或添加红色光晕 text-shadow: 0 0 10px #ff4500
      * 中性类emoji：添加青色光晕 text-shadow: 0 0 8px #00ffff
    

【椰椰电竞小游戏制作需求库】
1. 已确认的通用要求：
   - 技术栈：仅使用HTML+CSS+JavaScript（原生，不依赖框架）
   - 代码结构：分3个区块（<!-- HTML结构 -->、<!-- CSS样式 -->、<!-- JS逻辑 -->），注释清晰
   - 可维护性：变量/函数命名用英文（如mazeGrid、checkWin），避免拼音；关键逻辑加注释

2. 椰椰电竞游戏规则库：

   【扫雷游戏 - minesweeper.html】
   核心规则：
   - 固定7×7网格（49个格子），四种难度模式
   - 难度配置：
     * 体验版：9格可点击，988元，保底4288W，7个炸弹
     * 进阶版：12格可点击，1288元，保底5288W，9个炸弹
     * 专家版：16格可点击，1888元，保底7288W，12个炸弹
     * 至尊版：22格可点击，2388元，保底8888W，14个炸弹
   - 固定元素：13个数字格（1,2,8,5,1,4,3,4,5,4,6,3,2），其余为空白格
   - 游戏机制：
     * 踩到炸弹💣：保底-300W
     * 翻到数字：必须带出累计格子数的红，并能保底才能结单
     * 翻到空白：仅计入空格数量，不影响保底
   - UI要求：
     * 已翻开格子：深色背景，显示内容（炸弹/数字/空白）
     * 未翻开格子：科技蓝渐变背景，hover有发光效果
     * 游戏结束后：显示所有未翻格子（半透明灰色）
   - 数据导出/导入：支持JSON格式存档

   【翻翻乐 - flipcard.html】
   核心规则：
   - 三种难度模式：
     * 简单版(1288)：4列×5行=20张牌，保底3688W
     * 中等版(2388)：5列×6行=30张牌，保底6688W
     * 困难版(5588)：5列×10行=50张牌，保底16688W
   - 游戏机制：
     * 使用hong文件夹中的实物图片作为配对内容
     * 卡片背面显示序号（1,2,3...），正面显示图片
     * 点击两张牌，配对成功则保持翻开，失败则翻回
     * 记录翻牌次数（每次翻两张算一次）、游戏时间
   - 保底管理系统：
     * 可手动增加/减少保底金额
     * 记录所有保底变动历史（时间、变动金额、结果金额）
     * 支持查看完整变动记录
   - 翻牌奖励规则：
     * 小红（翻1次）：卡>50万 或 红<100万
     * 大红（翻2次）：100万-200万
     * 大大红（翻3次）：200万+ 或 稀有物品
     * 非心/复苏（翻6次）
     * 海洋之泪（翻10次）
   - 特殊说明：
     * 六套、红头修、红甲修不算红
     * 撤离失败带出的红不算
   - UI要求：
     * 未翻开：科技蓝背景，显示序号
     * 已翻开：橙色边框发光，显示图片
     * 配对成功：绿色边框，固定显示
   - 数据导出/导入：支持JSON格式，包含保底变动历史

   【迷宫游戏 - maze.html】
   核心规则：
   - 固定10×10网格
   - 迷宫生成：
     * 左上角为入口，右下角为出口
     * 唯一正确路径：从左上到右下，只能向右/向下走
     * 最短路径长度控制在22-26步（使用BFS验证）
     * 死胡同配置：8-12个死胡同，每个延伸3-5步
     * 死胡同限制：不从终点延伸，确保终点周围除正确路径外都是墙
     * 终点清晰度：排除正确路径最后5个点作为死胡同起点，让最后几步明显可见
     * 路径隔离：确保路径之间有墙隔开，不会出现相邻路径
     * 入口门：使用🚪emoji标识
     * 出口门：使用🚪emoji标识
   - 游戏机制：
     * 玩家表示：🏃emoji（奔跑小人）+ 🥥emoji（椰子）组合，自然显示在迷宫格子上
     * 已走过的格子显示为白色，未探索路径显示为淡粉色
     * 障碍墙显示为深灰色
     * 无后退功能（已移除后退按钮）
     * 碰撞处理：静默处理，不显示撞墙/边界提示
   - 方向提示：
     * 在迷宫网格中直接高亮显示可移动方向（绿色半透明矩形 + 绿色边框）
     * 显示下一步可走的格子（1格提示）
   - 统计信息：
     * 已走步数：仅计算踩过的不同格子数
     * 最短路径：显示理论最优步数（22-26步）
     * 当前位置：显示坐标或特殊位置（起点🚪/终点🚪）
   - 游戏结束展示：
     * 到达终点后，画布下方显示完整迷宫地图预览
     * 预览中仅显示正确路径（高亮绿色 #00ff88），死胡同暗淡灰色（#555555）
     * 墙壁显示为深灰色（#2a2a2a）
   - UI要求：
     * 科技蓝橙配色方案（与扫雷、翻翻乐一致）
     * 已探索路径：白色
     * 未探索区域：淡粉色（#ffb6c1），边框粉红色（#ff69b4）
     * 障碍墙：深灰色（#4a4a4a）
     * 控制按钮：科技蓝渐变，hover变橙色
   - 数据导出/导入：支持JSON格式，保存迷宫布局、探索进度、正确路径、游戏结束状态

3. 迭代规则：
   - 每次修改仅针对新增需求或明确指出的问题，保留原有正确功能（如改样式时不删JS逻辑）
   - 若需大幅调整（如换游戏类型），先复制上一版代码并标注"历史版本"，再基于新需求修改

【代码修改工作流程 - 核心规则】
⚠️ 禁止重写整个文件！必须遵循以下流程：

1. 📖 先读后改原则：
   - 收到优化需求后，必须先用 read_file 读取完整文件内容
   - 仔细分析现有代码结构、变量命名、函数逻辑
   - 确定需要修改的具体位置（精确到行号或函数名）

2. 🎯 精准定位修改：
   - 优先使用 search_replace 工具进行局部替换
   - 每次只修改1-3个相关函数/样式块，避免大范围改动
   - 示例：如果只需改变颜色，只替换对应的 CSS 变量或颜色值，不要重写整个样式表

3. 🔧 工具选择规范：
   - search_replace：修改已存在的代码块（优先使用）
   - write：仅用于创建全新文件，或文件结构需要完全重构时
   - 禁止场景：不要用 write 覆盖已有文件来实现小幅修改

4. ✅ 增量开发示例：
   需求："迷宫游戏中添加步数显示"
   ❌ 错误做法：重写整个 HTML 文件
   ✅ 正确做法：
      - 在 HTML 中找到状态栏位置，用 search_replace 添加 <div id="steps">步数: 0</div>
      - 在 CSS 中添加 #steps 的样式规则
      - 在 JS 中找到移动函数，添加步数计数逻辑

5. 🛡️ 保护现有功能：
   - 修改时保留所有已有的事件监听器、全局变量、工具函数
   - 如需重命名变量/函数，必须全局搜索并替换所有引用
   - 添加新功能时，不删除旧功能代码（除非明确要求移除）

6. 📝 修改前确认清单：
   □ 是否已读取并理解现有代码？
   □ 能否用 search_replace 精准替换而非重写？
   □ 新代码是否兼容现有变量/函数命名？
   □ 修改后是否保留了所有原有功能？

7. 🔄 大规模重构场景（仅在以下情况才允许重写）：
   - 用户明确要求"重做整个游戏"
   - 需要更换技术栈（如从原生JS改为框架）
   - 代码结构存在根本性缺陷，无法通过局部修改解决
   - 其他情况一律使用增量修改！